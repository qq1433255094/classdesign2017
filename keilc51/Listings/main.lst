C51 COMPILER V9.01   MAIN                                                                  06/21/2017 10:51:01 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE main.c BROWSE INCDIR(..\C51) DEBUG OBJECTEXTEND PRINT(.\Listings\main.lst) 
                    -OBJECT(.\Objects\main.obj)

line level    source

   1          #include <reg52.h> 
   2          #include <intrins.h> 
   3          #define uchar unsigned char  
   4          #define uint unsigned int 
   5          #define LCD_DB P0 
   6          sbit LCD_RS = P2^0;    
   7          sbit LCD_RW = P2^1;
   8          sbit LCD_E = P2^2;  
   9          void LCD_init(void);//初始化
  10          void LCD_write_command(uchar command);//写指令函数
  11          void LCD_write_data(uchar dat);//写数据指令
  12          
  13          void DisplayListChar (unsigned char x,unsigned char y,uchar dat)//显示的字符串
  14           { unsigned address;
  15   1       if(y==1) 
  16   1       address=0x80+x;  
  17   1       else 
  18   1       address= 0xC0+x;
  19   1       LCD_write_command(address);
  20   1       LCD_write_data(dat)     ;
  21   1       }
  22          
  23          
  24           
  25           //DisplayListChar(0,0,"speed:--",8);//液晶1602第一行显示
  26          //DisplayListChar(0,1,"stop",4);//液晶1602第二行显示 
  27          void delay_n40us(uint n);//延时
  28          
  29          void LCD_init(void)//初始化程序
  30          { 
  31   1      LCD_write_command(0x38);
  32   1      LCD_write_command(0x0c);
  33   1      LCD_write_command(0x06);
  34   1       LCD_write_command(0x01);
  35   1       delay_n40us(100);
  36   1      }
  37          void LCD_write_command(uchar command)//指令程序
  38          { LCD_DB=command;
  39   1      LCD_RS=0;
  40   1      LCD_RW=0; 
  41   1      LCD_E=1;
  42   1       LCD_E=0;
  43   1       delay_n40us(1);
  44   1       }
  45          void LCD_write_data(uchar dat)//数据指令
  46           {
  47   1                 LCD_DB=dat; 
  48   1                 LCD_RS=1;
  49   1                 LCD_RW=0;
  50   1                 LCD_E=1;
  51   1                 LCD_E=0; 
  52   1                 delay_n40us(1); 
  53   1      }
  54            void delay_n40us(uint n)//延时
C51 COMPILER V9.01   MAIN                                                                  06/21/2017 10:51:01 PAGE 2   

  55           {
  56   1                uint i;    
  57   1           uchar j;
  58   1            for(i=n;i>0;i--)      
  59   1            for(j=0;j<2;j++);
  60   1       }
  61          
  62            void main(void)
  63            { LCD_init();
  64   1        // DisplayListChar(0,0,"speed:--",8);//液晶1602第一行显示
  65   1        while(1)
  66   1        {
  67   2               DisplayListChar(0,1,'s');//液晶1602第二行显示
  68   2               delay_n40us(1000);
  69   2        }
  70   1        
  71   1         }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    133    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       3
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
